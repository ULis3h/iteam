# F002 - è®¾å¤‡ç®¡ç†

## åŸºæœ¬ä¿¡æ¯

| å±æ€§ | å€¼ |
|------|-----|
| åŠŸèƒ½ç¼–å· | F002 |
| åŠŸèƒ½åç§° | è®¾å¤‡ç®¡ç† |
| æ‰€å±æ¨¡å— | è®¾å¤‡ç®¡ç† |
| å®ç°ç‰ˆæœ¬ | 0.1.0 |
| å®ç°æ—¥æœŸ | 2026-01-17 |
| çŠ¶æ€ | âœ… å®Œæˆ |

## åŠŸèƒ½æ¦‚è¿°

ç®¡ç†è¿æ¥åˆ°ç³»ç»Ÿçš„ AI å¼€å‘è®¾å¤‡ï¼ŒåŒ…æ‹¬è®¾å¤‡åˆ—è¡¨å±•ç¤ºã€çŠ¶æ€ç›‘æ§ã€è¯¦æƒ…æŸ¥çœ‹ã€è®¾å¤‡å¿ƒè·³æ›´æ–°ç­‰åŠŸèƒ½ã€‚

## ç”¨æˆ·æ•…äº‹

1. ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡åˆ—è¡¨ï¼Œä»¥ä¾¿äº†è§£å›¢é˜Ÿè®¾å¤‡æ¦‚å†µ
2. ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›æŸ¥çœ‹è®¾å¤‡è¯¦ç»†ç¡¬ä»¶ä¿¡æ¯ï¼Œä»¥ä¾¿ç›‘æ§è®¾å¤‡æ€§èƒ½
3. ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°è®¾å¤‡å®æ—¶çŠ¶æ€ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°é—®é¢˜
4. ä½œä¸ºè®¾å¤‡ Agentï¼Œæˆ‘å¸Œæœ›å®šæœŸä¸ŠæŠ¥çŠ¶æ€ï¼Œä»¥ä¿æŒåœ¨çº¿çŠ¶æ€

## åŠŸèƒ½éœ€æ±‚

### FR-002-01: è®¾å¤‡åˆ—è¡¨

**æè¿°**: å±•ç¤ºæ‰€æœ‰å·²æ³¨å†Œè®¾å¤‡çš„åˆ—è¡¨

**æ˜¾ç¤ºå†…å®¹**:
- è®¾å¤‡åç§°å’Œ IP åœ°å€
- è®¾å¤‡ç±»å‹ï¼ˆVS Codeã€Claude Codeã€Windsurf ç­‰ï¼‰
- æ“ä½œç³»ç»Ÿï¼ˆå¸¦å›¾æ ‡ï¼‰
- è®¾å¤‡è§’è‰²ï¼ˆå‰ç«¯ã€åç«¯ã€DevOps ç­‰ï¼‰
- å½“å‰çŠ¶æ€ï¼ˆåœ¨çº¿/ç¦»çº¿/å·¥ä½œä¸­/ç©ºé—²ï¼‰
- å½“å‰ä»»åŠ¡
- æœ€åæ´»è·ƒæ—¶é—´

**äº¤äº’**:
- 10ç§’è‡ªåŠ¨åˆ·æ–°
- ç‚¹å‡»æ“ä½œæŒ‰é’®æ˜¾ç¤ºæ›´å¤šé€‰é¡¹

### FR-002-02: è®¾å¤‡è¯¦æƒ…

**æè¿°**: æŸ¥çœ‹è®¾å¤‡çš„è¯¦ç»†ç¡¬ä»¶å’Œæ€§èƒ½ä¿¡æ¯

**æ˜¾ç¤ºå†…å®¹**:
- CPU å‹å·ã€æ ¸å¿ƒæ•°ã€ä½¿ç”¨ç‡
- å†…å­˜å®¹é‡ã€ä½¿ç”¨ç‡
- GPU å‹å·ã€æ˜¾å­˜ã€ä½¿ç”¨ç‡
- ç£ç›˜å‹å·ã€æ€»å®¹é‡ã€å·²ç”¨ç©ºé—´ã€ä½¿ç”¨ç‡
- ä¸»æœºåã€è¿è¡Œæ—¶é—´ã€Agent ç‰ˆæœ¬

**UI**:
- æ¨¡æ€æ¡†å±•ç¤º
- ä½¿ç”¨ç‡æ˜¾ç¤ºè¿›åº¦æ¡
- é¢œè‰²ç¼–ç ï¼ˆç»¿è‰²<50%ï¼Œé»„è‰²50-80%ï¼Œçº¢è‰²>80%ï¼‰

### FR-002-03: è®¾å¤‡å¿ƒè·³

**æè¿°**: è®¾å¤‡ Agent å®šæœŸä¸ŠæŠ¥çŠ¶æ€

**è¾“å…¥**:
- è®¾å¤‡ ID
- å½“å‰çŠ¶æ€
- ç¡¬ä»¶ä¿¡æ¯ï¼ˆmetadataï¼‰
- å½“å‰ä»»åŠ¡

**å¤„ç†**:
1. éªŒè¯ API Key
2. æ›´æ–°è®¾å¤‡çŠ¶æ€
3. æ›´æ–°æœ€åæ´»è·ƒæ—¶é—´

**è®¤è¯æ–¹å¼**:
- X-API-Key å¤´ï¼ˆç”¨äºè®¾å¤‡ Agentï¼‰
- Bearer Tokenï¼ˆç”¨äºç”¨æˆ·ï¼‰

### FR-002-04: è®¾å¤‡åˆ é™¤

**æè¿°**: åˆ é™¤ä¸å†ä½¿ç”¨çš„è®¾å¤‡

**æµç¨‹**:
1. ç‚¹å‡»åˆ é™¤æŒ‰é’®
2. ç¡®è®¤å¯¹è¯æ¡†
3. è°ƒç”¨åˆ é™¤ API
4. åˆ·æ–°åˆ—è¡¨

## æŠ€æœ¯å®ç°

### åç«¯

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `server/prisma/schema.prisma` | Device æ•°æ®æ¨¡å‹ |
| `server/src/routes/devices.ts` | è®¾å¤‡ API è·¯ç”± |
| `server/src/index.ts` | API Key ä¸­é—´ä»¶ |

### å‰ç«¯

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `client/src/pages/Devices.tsx` | è®¾å¤‡ç®¡ç†é¡µé¢ |
| `client/src/components/OSIcon.tsx` | æ“ä½œç³»ç»Ÿå›¾æ ‡ç»„ä»¶ |

### API ç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° | è®¤è¯ |
|------|------|------|------|
| GET | `/api/devices` | è·å–æ‰€æœ‰è®¾å¤‡ | JWT/API-Key |
| GET | `/api/devices/:id` | è·å–è®¾å¤‡è¯¦æƒ… | JWT/API-Key |
| POST | `/api/devices` | åˆ›å»ºè®¾å¤‡ | JWT/API-Key |
| PUT | `/api/devices/:id` | æ›´æ–°è®¾å¤‡ | JWT/API-Key |
| DELETE | `/api/devices/:id` | åˆ é™¤è®¾å¤‡ | JWT/API-Key |

### æ•°æ®æ¨¡å‹

```prisma
model Device {
  id             String   @id @default(uuid())
  name           String
  type           String   // vscode, windsurf, antigravity, claude-code, other
  role           String?  // frontend, backend, fullstack, devops, qa, architect, pm, designer
  status         String   @default("offline") // online, offline, idle, working
  os             String
  ip             String
  currentProject String?
  currentModule  String?
  metadata       String?  // JSON string for hardware info
  lastSeen       DateTime @default(now())
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}
```

### Metadata ç»“æ„

```json
{
  "cpu": "Apple M3 Max",
  "cpuCores": 16,
  "cpuUsage": 45,
  "memory": "64GB Unified Memory",
  "memoryUsage": 62,
  "gpu": "Apple M3 Max (40-core GPU)",
  "gpuMemory": "64GB (å…±äº«)",
  "gpuUsage": 30,
  "disk": "Apple SSD 2TB",
  "diskTotal": "2TB",
  "diskUsed": "1.3TB",
  "diskUsage": 65,
  "hostname": "Macbook-Pro-Developer",
  "uptime": 345600,
  "version": "1.2.0"
}
```

## è®¾å¤‡ç±»å‹

| ç±»å‹ä»£ç  | æ˜¾ç¤ºåç§° | è¯´æ˜ |
|---------|---------|------|
| vscode | VS Code | Microsoft Visual Studio Code |
| windsurf | Windsurf | Codeium Windsurf IDE |
| antigravity | Antigravity | Google Antigravity |
| claude-code | Claude Code | Anthropic Claude Code |
| other | å…¶ä»– | å…¶ä»–å¼€å‘å·¥å…· |

## è®¾å¤‡çŠ¶æ€

| çŠ¶æ€ä»£ç  | æ˜¾ç¤ºåç§° | é¢œè‰² | è¯´æ˜ |
|---------|---------|------|------|
| online | åœ¨çº¿ | ğŸŸ¢ ç»¿è‰² | è®¾å¤‡åœ¨çº¿ï¼Œç©ºé—²çŠ¶æ€ |
| working | å·¥ä½œä¸­ | ğŸ”µ è“è‰² | è®¾å¤‡æ­£åœ¨æ‰§è¡Œä»»åŠ¡ |
| idle | ç©ºé—² | ğŸŸ¡ é»„è‰² | è®¾å¤‡ç©ºé—²ç­‰å¾…ä»»åŠ¡ |
| offline | ç¦»çº¿ | âš« ç°è‰² | è®¾å¤‡æœªè¿æ¥ |

## è®¾å¤‡æ¨¡æ‹Ÿ

å¼€å‘ç¯å¢ƒå¯ä½¿ç”¨ `simulate-devices.sh` è„šæœ¬æ¨¡æ‹Ÿè®¾å¤‡å¿ƒè·³ï¼š

```bash
./simulate-devices.sh
```

è„šæœ¬ä½¿ç”¨ `X-API-Key: iteam-device-key` è¿›è¡Œè®¤è¯ã€‚

## æµ‹è¯•ç”¨ä¾‹

| ç¼–å· | åœºæ™¯ | é¢„æœŸç»“æœ |
|------|------|---------|
| TC-002-01 | è®¿é—®è®¾å¤‡åˆ—è¡¨ | æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡ |
| TC-002-02 | ç‚¹å‡»è¯¦æƒ…æŒ‰é’® | å¼¹å‡ºè¯¦æƒ…æ¨¡æ€æ¡† |
| TC-002-03 | è®¾å¤‡å‘é€å¿ƒè·³ | çŠ¶æ€æ›´æ–°ï¼ŒlastSeen æ›´æ–° |
| TC-002-04 | åˆ é™¤è®¾å¤‡ | è®¾å¤‡ä»åˆ—è¡¨ç§»é™¤ |
| TC-002-05 | æ—  API Key è®¿é—® | è¿”å› 401 é”™è¯¯ |
