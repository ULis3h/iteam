# F009 - 团队协作拓扑图 (Team Topology)

## 1. 功能概述

**团队协作拓扑图 (Team Topology)** 是一个可视化的数据大屏页面，通过动态的 SVG 图形展示当前 iTeam 系统中所有设备的分布、角色归属以及它们之间的模拟协作关系。

### 1.1 目标
- **可视化团队结构**: 一眼看出当前有多少前端、后端、测试等角色的设备在线。
- **增强科技感**: 通过动态光效、数据流动画增强系统的科技感和活跃度。
- **直观监控**: 通过设备的脉冲效果直观反映设备的在线/活跃状态。

## 2. 核心功能

### 2.1 角色四象限布局
系统将 8 种角色自动归类为 4 个职能部门（象限）：

| 部门 (Cluster) | 坐标方位 | 包含角色 | 颜色标识 |
| :--- | :--- | :--- | :--- |
| **Planning (规划)** | 上方 (Top) | 项目经理 (PM), 架构师 (Architect) | 粉色/红色 |
| **Creative (创意)** | 左侧 (Left) | UI/UX 设计师 (Designer) | 青色 |
| **Development (开发)** | 右侧 (Right) | 前端 (Frontend), 后端 (Backend), 全栈 (Fullstack) | 蓝色/绿色/紫色 |
| **Operations (运维)** | 下方 (Bottom) | 运维 (DevOps), 测试 (QA) | 橙色/黄色 |

### 2.2 部门中枢 (Department Hubs)
每个象限中心有一个 "部门中枢" 节点，作为该部门的核心连接点。所有连接线均连接至中枢，避免了节点移动时的连线混乱。

### 2.3 动态协作流 (Data Flow)
系统模拟了标准的软件研发数据流，通过动画连接线展示：
1.  **Planning -> Creative**: 需求 -> 设计
2.  **Planning -> Development**: 需求 -> 开发
3.  **Creative -> Development**: 设计稿 -> 开发
4.  **Development -> Operations**: 代码 -> 部署/测试
5.  **Operations -> Planning**: 反馈 -> 迭代

### 2.4 设备节点
- **自动吸附**: 设备根据其 Role 属性，自动分布在所属部门中枢的周围。
- **在线状态**: 状态为 `online` 的设备会显示呼吸灯脉冲效果。
- **角色图标**: 每个设备显示其角色的专属 Emoji 图标。

## 3. 技术实现

### 3.1 核心组件
- **`Topology.tsx`**: 页面容器，负责从后端 API 获取设备数据。
- **`TopologyGraph.tsx`**: 核心图形组件，使用 SVG (Scalable Vector Graphics) 实现。无需引入 D3.js 或 ECharts 等重型库，保持轻量级。

### 3.2 关键技术点
- **SVG 滤镜**: 使用 `<feGaussianBlur>` 实现霓虹灯光晕效果。
- **SVG 动画**:
    - `<animateMotion>`: 实现数据包沿贝塞尔曲线路径流动。
    - `<animate>`: 实现虚线流动 (`stroke-dashoffset`) 和呼吸脉冲 (`r`, `opacity`)。
- **贝塞尔曲线**: 使用二阶贝塞尔曲线 (`Q` 命令) 绘制平滑的部门间连线。

## 4. API 依赖

该功能依赖于现有的设备 API：
- `GET /api/devices`: 获取所有设备列表，包括其 `role` 和 `status` 字段。

## 5. 未来的改进方向
- [ ] **真实流量监控**: 将模拟的数据流动画替换为真实的 WebSocket 消息频率监控。
- [ ] **拖拽交互**: 允许用户手动拖拽调整设备节点的位置。
- [ ] **点击详情**: 点击设备节点弹出详细信息卡片或悬浮窗。
