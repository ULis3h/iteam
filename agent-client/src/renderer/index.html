<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; connect-src 'self' ws: wss: http: https:">
  <title>iTeam Agent Client</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Header -->
  <header class="app-header">
    <div class="brand">
      <span style="color: var(--accent-blue); font-size: 20px;">ğŸ¤–</span>
      <span>iTeam Agent</span>
      <span class="version-tag">v0.1.0</span>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <div class="nav-tab active" data-tab="dashboard">è¿è¡Œç›‘æ§</div>
      <div class="nav-tab" data-tab="config">å‚æ•°é…ç½®</div>
      <div class="nav-tab" data-tab="logs">ç³»ç»Ÿæ—¥å¿—</div>
    </div>

    <!-- Connection Status -->
    <div class="header-actions">
      <div class="connection-pill" id="connection-status">
        <span class="status-indicator offline"></span>
        <span>æœªè¿æ¥</span>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <div class="main-container">

    <!-- TAB 1: DASHBOARD (Tasks & Status) -->
    <div id="tab-dashboard" class="tab-content">

      <!-- Metrics Cards -->
      <div class="metrics-grid">
        <div class="metric-card">
          <div class="metric-label">Client Status</div>
          <div class="metric-value">
            <span class="badge badge-neutral" id="agent-status-badge">OFFLINE</span>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Active Tasks</div>
          <div class="metric-value">
            0 <span class="badge badge-error" id="task-count-badge"
              style="display:none; margin-left:8px; font-size: 12px;">0</span>
          </div>
        </div>
        <div class="metric-card">
          <div class="metric-label">AI Model</div>
          <div class="metric-value" id="dashboard-ai-model" style="font-size: 14px; margin-top: 4px;">æœªé…ç½®</div>
        </div>
      </div>

      <!-- Task Table Toolbar -->
      <div class="toolbar" style="margin-top: 20px;">
        <div class="filter-group">
          <div class="search-box">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" placeholder="æœç´¢ä»»åŠ¡ ID...">
          </div>
        </div>
        <div class="actions-group">
          <!-- é¢„ç•™æ“ä½œæŒ‰é’® -->
        </div>
      </div>

      <!-- Task List Table -->
      <div class="table-container" style="flex: 1; min-height: 0;">
        <div class="table-header">
          <div>ä»»åŠ¡åç§°</div>
          <div style="width: 100px;">çŠ¶æ€</div>
          <div style="width: 150px;">è¿›åº¦</div>
          <div style="width: 120px;">æ—¶é—´</div>
          <div style="width: 60px; text-align: right;">æ“ä½œ</div>
        </div>
        <div class="table-body" id="task-list">
          <!-- Empty State -->
          <div class="empty-state">
            <p>æš‚æ— ä»»åŠ¡</p>
            <small>è¿æ¥åˆ°æœåŠ¡å™¨åï¼Œä»»åŠ¡å°†è‡ªåŠ¨æ˜¾ç¤ºåœ¨è¿™é‡Œ</small>
          </div>
        </div>
      </div>
    </div>

    <!-- TAB 2: CONFIGURATION -->
    <div id="tab-config" class="tab-content" style="display: none;">
      <div class="config-grid">

        <!-- Connection Config -->
        <div class="config-card">
          <div class="card-header">
            <h3>æœåŠ¡å™¨è¿æ¥</h3>
          </div>
          <div class="card-body">
            <div class="form-group">
              <label>æœåŠ¡å™¨åœ°å€</label>
              <input type="text" id="server-url" value="http://localhost:3000">
            </div>
            <div class="form-group">
              <label>Device Key</label>
              <input type="password" id="api-key" value="iteam-device-key">
            </div>
            <div class="form-actions">
              <button id="connect-btn" class="action-btn-primary btn-blue"
                style="width: 100%; justify-content: center;">è¿æ¥æœåŠ¡å™¨</button>
              <button id="disconnect-btn" class="action-btn-primary btn-orange"
                style="width: 100%; justify-content: center; display: none;">æ–­å¼€è¿æ¥</button>
            </div>
          </div>
        </div>

        <!-- Agent Identity -->
        <div class="config-card">
          <div class="card-header">
            <h3>Agent èº«ä»½</h3>
          </div>
          <div class="card-body">
            <div class="form-group">
              <label>è®¾å¤‡åç§°</label>
              <input type="text" id="agent-name" placeholder="ä¾‹å¦‚: MacBook Pro Agent">
            </div>
            <div class="form-group">
              <label>è§’è‰²ç±»å‹</label>
              <select id="agent-role">
                <option value="">é€‰æ‹©è§’è‰²...</option>
                <option value="frontend">Frontend Developer</option>
                <option value="backend">Backend Developer</option>
                <option value="fullstack">Full Stack Developer</option>
                <option value="devops">DevOps Engineer</option>
              </select>
            </div>
            <div class="form-group">
              <label>æŠ€èƒ½æ ‡ç­¾ (é€—å·åˆ†éš”)</label>
              <input type="text" id="agent-skills" placeholder="react, node, docker...">
            </div>
          </div>
        </div>

        <!-- AI Model Config -->
        <div class="config-card" style="grid-column: span 2;">
          <div class="card-header">
            <h3>AI æ¨¡å‹é…ç½®</h3>
          </div>
          <div class="card-body">
            <div class="grid-2-col">
              <div class="form-group">
                <label>AI æä¾›å•†</label>
                <select id="ai-provider">
                  <option value="anthropic">Anthropic (Claude)</option>
                  <option value="openai">OpenAI (GPT)</option>
                </select>
              </div>
              <div class="form-group">
                <label>æ¨¡å‹é€‰æ‹©</label>
                <select id="ai-model">
                  <optgroup label="Claude" id="claude-models">
                    <option value="claude-sonnet-4-5">Claude Sonnet 4.5</option>
                    <option value="claude-sonnet-3.5">Claude Sonnet 3.5</option>
                  </optgroup>
                  <optgroup label="OpenAI" id="openai-models" style="display:none">
                    <option value="gpt-4-turbo">GPT-4 Turbo</option>
                  </optgroup>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label>API Key</label>
              <input type="password" id="api-key-input" placeholder="sk-...">
            </div>

            <div class="form-group">
              <label>Custom Base URL (Optional)</label>
              <input type="text" id="api-base-url" placeholder="https://api.anthropic.com">
            </div>

            <div class="form-actions" style="margin-top: 10px; text-align: right;">
              <button id="save-config-btn" class="action-btn-primary">ä¿å­˜é…ç½®</button>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- TAB 3: LOGS -->
    <div id="tab-logs" class="tab-content" style="display: none; height: 100%;">
      <div class="log-terminal-container">
        <div class="terminal-header">
          <span style="font-size: 12px; color: var(--text-tertiary);">console output</span>
          <button class="icon-btn-small"
            style="width: auto; padding: 0 8px; height: 20px; font-size: 10px;">CLEAR</button>
        </div>
        <div id="log-terminal" class="log-terminal">
          <!-- Logs injected here -->
        </div>
      </div>
    </div>

  </div>

  <script src="renderer.js"></script>
</body>

</html>